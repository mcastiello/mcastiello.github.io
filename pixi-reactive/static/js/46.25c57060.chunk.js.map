{"version":3,"sources":["views/PropsTable.tsx","views/ComponentLink.tsx","views/pages/AnimationContext.tsx"],"names":["pageUrlMap","StyledCode","styled","code","getTypeLinks","a","getPageChildren","Pages","Types","pages","map","Map","i","length","getComponentUrl","path","set","PropsTable","props","useState","types","setTypes","useEffect","then","prop","index","key","f7","size","has","text","href","get","external","split","content","ComponentLink","page","className","url","setUrl","AnimatedBackground","src","speed","scale","frameId","useContext","AnimationContext","reducer","useCallback","position","useReducer","update","tileX","tileScaleY","FrameRateStats","fps","averageFps","minFps","maxFps","AnimationContextExample","PixiTilingSpriteDoc","PixiCanvas","PixiTilingSprite","style","height"],"mappings":"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","file":"static/js/46.25c57060.chunk.js","sourcesContent":["import { Block, Icon } from 'framework7-react';\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { getComponentUrl, getPageChildren, Pages } from '../pages';\nimport { StyledTable, StyledLink, StyledTableContainer } from './StyledComponents';\n\ntype PropDefinition = [string, boolean, string, string, string];\nexport type PropsDefinition = PropDefinition[];\n\nexport const StyledCode = styled.code`\n  background: rgba(100, 100, 100, 0.5);\n  padding: 0 5px;\n  border-radius: 2px;\n`;\n\nexport const parseCode = (text: string) => {\n  const parts = text.split(/`/);\n\n  return parts.map((content, index) => {\n    if (index % 2 === 0) {\n      return <span key={index}>{content}</span>;\n    } else {\n      return <StyledCode key={index}>{content}</StyledCode>;\n    }\n  });\n};\n\nlet pageUrlMap: Map<Pages, string>;\n\nconst getTypeLinks = async () => {\n  if (!pageUrlMap) {\n    const pages = await getPageChildren(Pages.Types);\n    const map = new Map<Pages, string>();\n\n    for (let i = 0; i < pages.length; i++) {\n      const path = await getComponentUrl(pages[i]);\n\n      map.set(pages[i], `#${path}`);\n    }\n\n    pageUrlMap = map;\n  }\n\n  return pageUrlMap;\n};\n\nconst PropsTable: React.FC<{ props: PropsDefinition }> = ({ props = [] }) => {\n  const [types, setTypes] = useState<Map<Pages, string>>();\n\n  useEffect(() => {\n    getTypeLinks().then(setTypes);\n  }, []);\n\n  return (\n    <Block>\n      <StyledTableContainer>\n        <StyledTable>\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Required</th>\n              <th>Type</th>\n              <th>Default</th>\n              <th>Description</th>\n            </tr>\n          </thead>\n          <tbody>\n            {props.map((prop, index) => {\n              return (\n                <tr key={index}>\n                  <td>{prop[0]}</td>\n                  <td>{prop[1] ? <Icon f7={'checkmark_alt'} size={14} /> : null}</td>\n                  <td>\n                    <code>\n                      {types && types.has(prop[2] as Pages) ? (\n                        <StyledLink text={prop[2]} href={types.get(prop[2] as Pages)} external />\n                      ) : (\n                        prop[2]\n                      )}\n                    </code>\n                  </td>\n                  <td>\n                    <code>{prop[3]}</code>\n                  </td>\n                  <td>{parseCode(prop[4])}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </StyledTable>\n      </StyledTableContainer>\n    </Block>\n  );\n};\n\nexport default PropsTable;\n","import React, { useEffect, useState } from 'react';\nimport { getComponentUrl, Pages } from '../pages';\nimport { StyledComponentLink } from './StyledComponents';\n\nconst ComponentLink: React.FC<{ page: Pages; className?: string }> = ({ page, className }) => {\n  const [url, setUrl] = useState<string | undefined>();\n\n  useEffect(() => {\n    getComponentUrl(page).then((url) => setUrl(`#${url}`));\n  }, [page]);\n\n  return <StyledComponentLink className={className} href={url} key={page} text={page} external />;\n};\n\nexport default ComponentLink;\n","import { Block } from 'framework7-react';\nimport { PixiCanvas, PixiTexture, PixiTilingSprite, AnimationContext } from 'pixi-reactive';\nimport React, { useCallback, useContext, useEffect, useReducer } from 'react';\nimport { Pages } from '../../pages';\nimport CodeViewer from '../CodeViewer';\nimport ComponentLink from '../ComponentLink';\nimport PropsTable, { PropsDefinition, StyledCode } from '../PropsTable';\nimport { StyledIntroduction, StyledSectionTitle, StyledTitle } from '../StyledComponents';\n\nconst props: PropsDefinition = [\n  ['frameId', true, 'number', '0', 'ID of the latest frame generated by the browser'],\n  ['elapsed', true, 'number', '0', 'Elapsed time in milliseconds since the last generated frame'],\n  ['fps', true, 'number', '0', 'Current framerate of the application'],\n  ['averageFps', true, 'number', '0', 'Average framerate of the application'],\n  ['minFps', true, 'number', '0', 'Minimum framerate reached'],\n  ['maxFps', true, 'number', '0', 'Maximum framerate reached'],\n  ['history', true, 'number[]', '[]', 'History of the latest 120 fps recorded']\n];\n\ntype AnimatedBackgroundProps = { src: string; speed: number; scale?: number };\n\nconst AnimatedBackground: React.FC<AnimatedBackgroundProps> = ({ src, speed, scale = 1 }) => {\n  const { frameId } = useContext(AnimationContext);\n  const reducer = useCallback((position) => position - speed, [speed]);\n  const [position, update] = useReducer(reducer, 0);\n\n  useEffect(update, [frameId]);\n\n  return (\n    <PixiTilingSprite tileX={position} tileScaleY={scale}>\n      <PixiTexture src={src} />\n    </PixiTilingSprite>\n  );\n};\n\nconst FrameRateStats: React.FC = () => {\n  const { fps, averageFps, minFps, maxFps } = useContext(AnimationContext);\n\n  return (\n    <div>\n      Current: {fps} - Average: {averageFps} - Min: {minFps} - Max: {maxFps}\n    </div>\n  );\n};\n\nconst AnimationContextExample: React.FC = () => {\n  return (\n    <PixiCanvas>\n      <AnimatedBackground src={'./static/assets/galaxy.png'} speed={0.1} />\n      <AnimatedBackground src={'./static/assets/slow-stars.png'} speed={0.5} />\n      <AnimatedBackground src={'./static/assets/fast-stars.png'} speed={2} scale={0.5} />\n      <FrameRateStats />\n    </PixiCanvas>\n  );\n};\n\nconst PixiTilingSpriteDoc: React.FC = () => {\n  return (\n    <>\n      <StyledTitle>AnimationContext</StyledTitle>\n      <StyledIntroduction>\n        When you develop your animation in one single React component, you can use the <StyledCode>onUpdate</StyledCode> callback from the{' '}\n        <ComponentLink page={Pages.PixiCanvas} /> to update your animation, but let's be honest, that is unlikely to happen in a real life\n        scenario. You are probably going to create your own components that will need to be able to leave on their own and be reusable as\n        much as possible. That is where the <StyledCode>AnimationContext</StyledCode> comes in hand. It provides you with the property{' '}\n        <StyledCode>frameId</StyledCode> that gets updated every time an animation frame is provided by the browser, which means that you\n        can use it to create a side effect in your component.\n        <br />\n        Let's refactor the example from <ComponentLink page={Pages.PixiTilingSprite} /> to make use of this, and let's have a look at the\n        other performance stats provided by the context while we are there:\n      </StyledIntroduction>\n      <Block style={{ height: 300 }}>\n        <AnimationContextExample />\n      </Block>\n      <Block>\n        <CodeViewer src={'./static/examples/AnimationContextExample.tsx'} />\n      </Block>\n      <StyledSectionTitle>Properties</StyledSectionTitle>\n      <PropsTable props={props} />\n    </>\n  );\n};\n\nexport default PixiTilingSpriteDoc;\n"],"sourceRoot":""}