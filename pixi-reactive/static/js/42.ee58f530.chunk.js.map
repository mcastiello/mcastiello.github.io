{"version":3,"sources":["views/pages/SpeedContext.tsx","views/ComponentLink.tsx"],"names":["props","textures","galaxy","ship","StyledButton","styled","Link","SpeedController","useContext","SpeedContext","play","pause","increase","decrease","speed","useState","running","setRunning","togglePlayPause","useCallback","style","textAlign","float","iconOnly","iconF7","onClick","Ship","width","RenderingContext","elapsed","AnimationContext","positionReducer","position","delta","useReducer","updatePosition","useEffect","Math","round","texture","x","alignY","SpeedContextExample","SpeedContextDoc","page","Pages","PixiAnimatedSprite","height","src","ComponentLink","className","dispatch","DispatchContext","url","setUrl","getComponentUrl","then","href","key","text"],"mappings":"2VAUA,IAAMA,EAAyB,CAC7B,CAAC,SAAS,EAAM,SAAU,IAAK,kCAC/B,CAAC,YAAY,EAAM,WAAY,aAAc,4BAC7C,CAAC,YAAY,EAAM,WAAY,aAAc,2BAC7C,CAAC,QAAQ,EAAM,WAAY,aAAc,gCACzC,CAAC,SAAS,EAAM,WAAY,aAAc,8BAC1C,CAAC,YAAY,EAAM,WAAY,0BAA2B,sCAGtDC,EAAW,CACfC,OAAQ,6BACRC,KAAM,iCAGFC,EAAeC,YAAOC,IAAPD,CAAH,KAMZE,EAA4B,WAAO,IAAD,EACaC,qBAAWC,KAAtDC,EAD8B,EAC9BA,KAAMC,EADwB,EACxBA,MAAOC,EADiB,EACjBA,SAAUC,EADO,EACPA,SAAUC,EADH,EACGA,MADH,EAERC,oBAAS,GAFD,mBAE/BC,EAF+B,KAEtBC,EAFsB,KAIhCC,EAAkBC,uBAAY,WAC9BH,GACFL,IACAM,GAAW,KAEXP,IACAO,GAAW,MAEZ,CAACD,EAASN,EAAMC,IAEnB,OACE,oCACE,yBAAKS,MAAO,CAAEC,UAAW,WACvB,0BAAMD,MAAO,CAAEE,MAAO,SAAtB,UAAwCR,GACxC,kBAACV,EAAD,CAAcmB,UAAQ,EAACC,OAAQ,gBAAiBC,QAASZ,IACzD,kBAACT,EAAD,CAAcmB,UAAQ,EAACC,OAAQ,iBAAkBC,QAASP,IAC1D,kBAACd,EAAD,CAAcmB,UAAQ,EAACC,OAAQ,eAAgBC,QAASb,OAO1Dc,EAAiB,WAAO,IACpBC,EAAUnB,qBAAWoB,KAArBD,MACAE,EAAYrB,qBAAWsB,KAAvBD,QACFE,EAAkBZ,uBAAY,SAACa,EAAUC,GAAX,OAAsBD,EAAWC,IAAUN,EAAQ,OAAM,CAACA,IAHnE,EAIQO,qBAAWH,EAAiB,GAJpC,mBAIpBC,EAJoB,KAIVG,EAJU,KAY3B,OANAC,qBAAU,WACR,IACMH,EAAQI,KAAKC,MAAOT,GADJ,IAAO,IACwB,IAAM,GAC3DM,EAAeF,KACd,CAACJ,IAEG,kBAAC,IAAD,CAAYU,QAAS,OAAQC,EAAGR,EAAW,IAAKS,OAAQ,MAG3DC,EAAgC,WACpC,OACE,kBAAC,IAAD,CAAYzC,SAAUA,GACpB,kBAAC,IAAD,CAAkBsC,QAAS,WAC3B,kBAACb,EAAD,MACA,kBAACnB,EAAD,QAiCSoC,UA5BmB,WAChC,OACE,oCACE,kBAAC,IAAD,qBACA,kBAAC,IAAD,0HACqH,IACnH,kBAAC,IAAD,gBAFF,sBAEqD,kBAAC,IAAD,CAAeC,KAAMC,IAAMf,mBAFhF,mGAGmE,kBAAC,IAAD,CAAec,KAAMC,IAAMC,qBAH9F,sEAKE,6BALF,kMAQE,6BARF,+CAS8C,kBAAC,IAAD,aAT9C,yBASiG,kBAAC,IAAD,gBAAiC,IATlI,kIAYA,kBAAC,IAAD,CAAO1B,MAAO,CAAE2B,OAAQ,MACtB,kBAACL,EAAD,OAEF,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAYM,IAAK,+CAEnB,kBAAC,IAAD,mBACA,kBAAC,IAAD,CAAYhD,MAAOA,O,6EC1FViD,IAXsD,SAAC,GAAyB,IAAvBL,EAAsB,EAAtBA,KAAMM,EAAgB,EAAhBA,UACpEC,EAAa3C,qBAAW4C,KAAxBD,SADoF,EAEtEpC,qBAFsE,mBAErFsC,EAFqF,KAEhFC,EAFgF,KAQ5F,OAJAlB,qBAAU,WACRmB,YAAgBX,GAAMY,MAAK,SAAAH,GAAG,OAAIC,EAAO,IAAD,OAAKD,SAC5C,CAACT,IAEG,kBAAC,IAAD,CAAqBM,UAAWA,EAAWO,KAAMJ,EAAKK,IAAKd,EAAMe,KAAMf,EAAMnB,QAAS,kBAAM0B,EAASP","file":"static/js/42.ee58f530.chunk.js","sourcesContent":["import { Block, Link } from 'framework7-react';\nimport { AnimationContext, PixiCanvas, PixiSprite, PixiTilingSprite, RenderingContext, SpeedContext } from 'pixi-reactive';\nimport React, { useCallback, useContext, useEffect, useReducer, useState } from 'react';\nimport styled from 'styled-components';\nimport { Pages } from '../../pages';\nimport CodeViewer from '../CodeViewer';\nimport ComponentLink from '../ComponentLink';\nimport PropsTable, { PropsDefinition, StyledCode } from '../PropsTable';\nimport { StyledIntroduction, StyledSectionTitle, StyledTitle } from '../StyledComponents';\n\nconst props: PropsDefinition = [\n  ['speed', true, 'number', '1', 'Current speed of the animation'],\n  ['increase', true, 'function', '() => void', 'Double the current speed'],\n  ['decrease', true, 'function', '() => void', 'Halve the current speed'],\n  ['play', true, 'function', '() => void', 'Reset the current speed to 1'],\n  ['pause', true, 'function', '() => void', 'Set the current speed to 0'],\n  ['setSpeed', true, 'function', '(speed: number) => void', 'Set the speed to a specific value']\n];\n\nconst textures = {\n  galaxy: './static/assets/galaxy.png',\n  ship: './static/assets/spaceship.png'\n};\n\nconst StyledButton = styled(Link)`\n  color: white;\n  padding: 0 5px;\n`;\n\n// Add the speed controller that allow us to accelerate or slow down the animation\nconst SpeedController: React.FC = () => {\n  const { play, pause, increase, decrease, speed } = useContext(SpeedContext);\n  const [running, setRunning] = useState(true);\n\n  const togglePlayPause = useCallback(() => {\n    if (running) {\n      pause();\n      setRunning(false);\n    } else {\n      play();\n      setRunning(true);\n    }\n  }, [running, play, pause]);\n\n  return (\n    <>\n      <div style={{ textAlign: 'center' }}>\n        <span style={{ float: 'left' }}>Speed: {speed}</span>\n        <StyledButton iconOnly iconF7={'backward_fill'} onClick={decrease} />\n        <StyledButton iconOnly iconF7={'playpause_fill'} onClick={togglePlayPause} />\n        <StyledButton iconOnly iconF7={'forward_fill'} onClick={increase} />\n      </div>\n    </>\n  );\n};\n\n// The ship animation is now based on the elapsed time\nconst Ship: React.FC = () => {\n  const { width } = useContext(RenderingContext);\n  const { elapsed } = useContext(AnimationContext);\n  const positionReducer = useCallback((position, delta) => (position + delta) % (width + 300), [width]);\n  const [position, updatePosition] = useReducer(positionReducer, 0);\n\n  useEffect(() => {\n    const frameDuration = 1000 / 60;\n    const delta = Math.round((elapsed / frameDuration) * 10) / 10;\n    updatePosition(delta);\n  }, [elapsed]);\n\n  return <PixiSprite texture={'ship'} x={position - 150} alignY={0.5} />;\n};\n\nconst SpeedContextExample: React.FC = () => {\n  return (\n    <PixiCanvas textures={textures}>\n      <PixiTilingSprite texture={'galaxy'} />\n      <Ship />\n      <SpeedController />\n    </PixiCanvas>\n  );\n};\n\nconst SpeedContextDoc: React.FC = () => {\n  return (\n    <>\n      <StyledTitle>SpeedContext</StyledTitle>\n      <StyledIntroduction>\n        This context provides the instruments to alter the speed of the canvas rendering. This is achieved by changing the{' '}\n        <StyledCode>elapsed</StyledCode> property from the <ComponentLink page={Pages.AnimationContext} />. This means that it will only\n        affect those animations based on this parameter. Components like <ComponentLink page={Pages.PixiAnimatedSprite} /> are already based\n        on this, so they will be automatically affected.\n        <br />\n        This is mostly useful during debug, because it allows you to slow down animations and check every frame, or to accelerate the\n        execution to skip sequence of animations we're not interested in.\n        <br />\n        In the following example we'll refactor the <StyledCode>Ship</StyledCode> animation to use the <StyledCode>elapsed</StyledCode>{' '}\n        property, so that we can handle its speed using the context functions. Click the buttons below the canvas to see what happens.\n      </StyledIntroduction>\n      <Block style={{ height: 300 }}>\n        <SpeedContextExample />\n      </Block>\n      <Block>\n        <CodeViewer src={'./static/examples/SpeedContextExample.tsx'} />\n      </Block>\n      <StyledSectionTitle>Properties</StyledSectionTitle>\n      <PropsTable props={props} />\n    </>\n  );\n};\n\nexport default SpeedContextDoc;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { DispatchContext, getComponentUrl, Pages } from '../pages';\nimport { StyledComponentLink } from './StyledComponents';\n\nconst ComponentLink: React.FC<{ page: Pages; className?: string }> = ({ page, className }) => {\n  const { dispatch } = useContext(DispatchContext);\n  const [url, setUrl] = useState<string|undefined>();\n\n  useEffect(() => {\n    getComponentUrl(page).then(url => setUrl(`#${url}`))\n  }, [page]);\n\n  return <StyledComponentLink className={className} href={url} key={page} text={page} onClick={() => dispatch(page)} />;\n};\n\nexport default ComponentLink;\n"],"sourceRoot":""}